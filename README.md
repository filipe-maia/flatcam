FlatCAM: 2D Computer-Aided PCB Manufacturing
============================================

(c) 2014-2016 Juan Pablo Caram

FlatCAM is a program for preparing CNC jobs for making PCBs on a CNC router.
Among other things, it can take a Gerber file generated by your favorite PCB
CAD program, and create G-Code for Isolation routing.

To start this program you need Python installed in your computer (tested with version 3.13.4).

Before starting this program for the first time on your computer, make sure you have all the required Python dependencies by running 'pip install -r requirements.txt' (and, if you are on Windows, 'pip install -r requirements_windows.txt' as well).

To start this program run 'py flatcam' or 'python flatcam'.

TODO:
```
[DEBUG][MainThread] Radio toggled
[WARNING][MainThread] Tried to set an option or field that does not exist: use_buffer_for_union
```
```
[DEBUG][MainThread] on_generatecutout_button_click--> FlatCAMObj.read_form()
[WARNING][MainThread] Failed to read option from field: use_buffer_for_union
```
```
[DEBUG][MainThread] on_iso_button_click--> FlatCAMObj.read_form()
[WARNING][MainThread] Failed to read option from field: use_buffer_for_union
```
```
...
[DEBUG] {'type': 'C', 'size': 2.286}
[DEBUG] Line 608: Aperture change to (29)
[DEBUG] {'type': 'C', 'size': 1.27}
[DEBUG] {'type': 'C', 'size': 1.27}
[WARNING] Joining 213 polygons.
[DEBUG] Union by buffer...
[WARNING] Union(buffer) done.
[DEBUG][Dummy-2] 0.241575 seconds executing initialize().
```
```
[DEBUG][Dummy-2] FCVisibleProcessContainer.on_done()
Traceback (most recent call last):
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMWorker.py", line 62, in do_worker_task
    raise e
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMWorker.py", line 59, in do_worker_task
    task['fcn'](*task['params'])
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMObj.py", line 1595, in job_thread
    app_obj.new_object("cncjob", outname, job_init)
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMApp.py", line 1074, in new_object
    initialize(obj, self)
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMObj.py", line 1581, in job_init
    job_obj.generate_from_geometry_2(self,
  File "/mnt/EA56F2E856F2B483/flatcam/camlib.py", line 3245, in generate_from_geometry_2
    storage.insert(shape)
  File "/mnt/EA56F2E856F2B483/flatcam/camlib.py", line 4353, in insert
    super(FlatCAMRTreeStorage, self).insert(idx, obj)
  File "/mnt/EA56F2E856F2B483/flatcam/camlib.py", line 4306, in insert
    for pt in self.get_points(obj):
  File "/mnt/EA56F2E856F2B483/flatcam/camlib.py", line 3235, in get_pts
    return [o.coords[0], o.coords[-1]]
  File "/home/v00efmem/.local/lib/python3.10/site-packages/shapely/geometry/base.py", line 1033, in coords
    raise NotImplementedError(
NotImplementedError: Sub-geometries may have coordinate sequences, but multi-part geometries do not
```
```
[DEBUG][MainThread] save_project()
[DEBUG][MainThread] save_project--> FlatCAMObj.read_form()
[ERROR][MainThread] [error] Failed to open file for saving: ('/mnt/EA56F2E856F2B483/flatcam/examples/gerber/gerber', 'All Files (*)')
[DEBUG][MainThread] register_recent()
[DEBUG][MainThread]    project
[DEBUG][MainThread]    ('/mnt/EA56F2E856F2B483/flatcam/examples/gerber/gerber', 'All Files (*)')
[DEBUG][MainThread] setup_recent_items()
[DEBUG][MainThread] save_project()
[DEBUG][MainThread] save_project--> FlatCAMObj.read_form()
[ERROR][MainThread] [error] Failed to open file for saving: ('/mnt/EA56F2E856F2B483/flatcam/examples/gerber/gerber', 'All Files (*)')
```


TODO: After clicking on button to generate CNC:
```
[DEBUG][MainThread] plot --> FlatCAMObj.plot()
[WARNING][MainThread] A geometry component was not a polygon:
[WARNING][MainThread] MULTIPOLYGON (((...)))
```
and after clicking a second time:
```
[DEBUG][Dummy-2] FCVisibleProcessContainer.on_done()
Traceback (most recent call last):
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMWorker.py", line 62, in do_worker_task
    raise e
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMWorker.py", line 59, in do_worker_task
    task['fcn'](*task['params'])
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMObj.py", line 1595, in job_thread
    app_obj.new_object("cncjob", outname, job_init)
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMApp.py", line 1074, in new_object
    initialize(obj, self)
  File "/mnt/EA56F2E856F2B483/flatcam/FlatCAMObj.py", line 1581, in job_init
    job_obj.generate_from_geometry_2(self,
  File "/mnt/EA56F2E856F2B483/flatcam/camlib.py", line 3245, in generate_from_geometry_2
    storage.insert(shape)
  File "/mnt/EA56F2E856F2B483/flatcam/camlib.py", line 4353, in insert
    super(FlatCAMRTreeStorage, self).insert(idx, obj)
  File "/mnt/EA56F2E856F2B483/flatcam/camlib.py", line 4306, in insert
    for pt in self.get_points(obj):
  File "/mnt/EA56F2E856F2B483/flatcam/camlib.py", line 3235, in get_pts
    return [o.coords[0], o.coords[-1]]
  File "/home/v00efmem/.local/lib/python3.10/site-packages/shapely/geometry/base.py", line 1033, in coords
    raise NotImplementedError(
NotImplementedError: Sub-geometries may have coordinate sequences, but multi-part geometries do not
```

TODO: This error happens sometimes while starting flatcam, but application doesn't seem to bug out, so this is a minor bug.
```
C:\flatcam>py flatcam
C:\flatcam\FlatCAMApp.py:789: SyntaxWarning: invalid escape sequence '\ '
  escape bracket [ with \  otherwise there is error
C:\flatcam\FlatCAMApp.py:925: SyntaxWarning: invalid escape sequence '\['
  match = re.search("\[([^\]]+)\](.*)", msg)
C:\flatcam\FlatCAMObj.py:748: SyntaxWarning: "is not" with 'str' literal. Did you mean "!="?
  if option is not 'name':
C:\flatcam\camlib.py:1610: SyntaxWarning: invalid escape sequence '\+'
  '?(?=.*I([\+-]?\d+))?(?=.*J([\+-]?\d+))?[XYIJ][^D]*(?:D0([12]))?\*$')
C:\flatcam\camlib.py:2318: SyntaxWarning: "is not" with 'str' literal. Did you mean "!="?
  if self.apertures[current_aperture]["type"] is not "AM":
C:\flatcam\svgparse.py:275: SyntaxWarning: invalid escape sequence '\{'
  kind = re.search('(?:\{.*\})?(.*)$', node.tag).group(1)
C:\flatcam\FlatCAMDraw.py:1019: SyntaxWarning: "is" with 'int' literal. Did you mean "=="?
  if self.active_tool is not None and event.button is 1:
C:\flatcam\ToolTransform.py:267: SyntaxWarning: "is" with 'str' literal. Did you mean "=="?
  if axis is 'X':
C:\flatcam\ToolTransform.py:271: SyntaxWarning: "is" with 'str' literal. Did you mean "=="?
  elif axis is 'Y':
C:\flatcam\ToolTransform.py:308: SyntaxWarning: "is" with 'str' literal. Did you mean "=="?
  if axis is 'X':
C:\flatcam\ToolTransform.py:310: SyntaxWarning: "is" with 'str' literal. Did you mean "=="?
  elif axis is 'Y':
[INFO][MainThread] FlatCAM Starting...
```

TODO: This error happens sometimes while starting flatcam, and re-starting it usually solves it, so this is a minor bug:
```
Traceback (most recent call last):
  File "C:\flatcam\GUIElements.py", line 47, in on_toggle
    if radio.isChecked():
       ^^^^^^^^^^^^^^^
AttributeError: 'QThread' object has no attribute 'isChecked'
```

TODO: Check if reading files other than Gerber also produces a similar error that existed when opening Gerber files and that was corrected on commit 2025/06/10 10h41m GMT+1:
```
Traceback (most recent call last):
  File "C:\flatcam\FlatCAMApp.py", line 2063, in obj_init
    gerber_obj.parse_file(filename, follow=follow)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\flatcam\camlib.py", line 1824, in parse_file
    with open(filename, 'r') as gfile:
         ~~~~^^^^^^^^^^^^^^^
OSError: [Errno 22] Invalid argument: "('C:/flatcam/examples/Gerber/example.gbr', 'All Files (*)')"
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "C:\flatcam\FlatCAMWorker.py", line 62, in do_worker_task
    raise e
  File "C:\flatcam\FlatCAMWorker.py", line 59, in do_worker_task
    task['fcn'](*task['params'])
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\flatcam\FlatCAMApp.py", line 2100, in open_gerber
    self.new_object("gerber", name, obj_init)
    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\flatcam\FlatCAMApp.py", line 1081, in new_object
    initialize(obj, self)
    ~~~~~~~~~~^^^^^^^^^^^
  File "C:\flatcam\FlatCAMApp.py", line 2068, in obj_init
    raise IOError('Failed to open file: ' + filename)
OSError: Failed to open file: ('C:/flatcam/examples/Gerber/example.gbr', 'All Files (*)')
```

TODO: Related with the previous bug, file name on the UI (and probably everywhere else) is ```example.gbr', 'All Files (*)')``` instead of beeing ```example.gbr```, but application doesn't seem to bug out, so this is a minor bug.

TODO: Related with the previous bug, if file name and path is empty what happens?
